(()=>{var e={};e.id=461,e.ids=[461],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5173:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>g,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),r(8435),r(9288),r(6513),r(5866);var a=r(3191),s=r(8716),n=r(7922),o=r.n(n),l=r(5231),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(t,i);let c=["",{children:["onboarding",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8435)),"C:\\Users\\wcatalfamo\\Projects\\Personal\\skillogue-web\\src\\app\\onboarding\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,9288)),"C:\\Users\\wcatalfamo\\Projects\\Personal\\skillogue-web\\src\\app\\onboarding\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,6513)),"C:\\Users\\wcatalfamo\\Projects\\Personal\\skillogue-web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\wcatalfamo\\Projects\\Personal\\skillogue-web\\src\\app\\onboarding\\page.tsx"],u="/onboarding/page",g={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/onboarding/page",pathname:"/onboarding",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5530:(e,t,r)=>{Promise.resolve().then(r.bind(r,2752))},1257:(e,t,r)=>{Promise.resolve().then(r.bind(r,9418))},6333:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(2881).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7506:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(2881).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2752:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(326),s=r(3058);function n({children:e}){return a.jsx(s.Z,{children:e})}},9418:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(326),s=r(7577),n=r(373),o=r(5047),l=r(6333);let i=(0,r(2881).Z)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var c=r(9024);let d=()=>{let[e,t]=(0,s.useState)(1),[r,d]=(0,s.useState)(!0),[u,g]=(0,s.useState)({first_name:"",last_name:"",about_me:"",age:"",gender:""}),[m,x]=(0,s.useState)({city:"",region:"",country:""}),[p,h]=(0,s.useState)([]),[f,b]=(0,s.useState)([]),[y,j]=(0,s.useState)([]),[w,v]=(0,s.useState)([]),[N,_]=(0,s.useState)([]),[P,k]=(0,s.useState)([]),[S,C]=(0,s.useState)([]),[O,E]=(0,s.useState)(""),q=(0,o.useRouter)();(0,s.useEffect)(()=>{(async()=>{let{data:{user:e}}=await n.O.auth.getUser();if(!e){q.push("/login");return}let{data:t}=await n.O.from("languages").select("id, name");v(t||[]);let{data:r}=await n.O.from("passions").select("id, name");j(r||[]);let{data:a}=await n.O.rpc("get_distinct_countries");_(a?.map(e=>e.country)||[]),d(!1)})()},[q]),(0,s.useEffect)(()=>{m.country?(async()=>{let{data:e,error:t}=await n.O.rpc("get_distinct_regions",{p_country:m.country});t?console.error("Error fetching regions:",t):k(e.map(e=>e.region).filter(Boolean))})():k([])},[m.country]),(0,s.useEffect)(()=>{m.country?(async()=>{let{data:e,error:t}=await n.O.rpc("get_distinct_cities",{p_country:m.country,p_region:m.region||null});t?console.error("Error fetching cities:",t):C(e.map(e=>e.city))})():C([])},[m.country,m.region]);let Z=e=>{let{name:t,value:r}=e.target;g(e=>({...e,[t]:r}))},L=e=>{let{name:t,value:r}=e.target;x(e=>{let a={...e,[t]:r};return"country"===t&&(a.region="",a.city=""),a})},M=async()=>{if(f.length<3){E("Please select at least 3 passions.");return}d(!0);try{let{data:{user:e}}=await n.O.auth.getUser();if(!e)throw Error("No user found");let t=null;if(m.city&&m.country){let{data:e,error:r}=await n.O.from("locations").select("id").eq("city",m.city).eq("region",m.region||"").eq("country",m.country).maybeSingle();if(r)throw r;if(e)t=e.id;else{let{data:e,error:r}=await n.O.from("locations").insert({city:m.city,region:m.region||"",country:m.country}).select().single();if(r)throw r;t=e.id}}let{error:r}=await n.O.from("profiles").upsert({id:e.id,...u,age:parseInt(u.age),location_id:t,updated_at:new Date().toISOString()});if(r)throw r;if(p.length>0){let t=p.map(t=>{let r=w.find(e=>e.name===t);return r?{profile_id:e.id,language_id:r.id}:null}).filter(Boolean);await n.O.from("profile_languages").insert(t)}if(f.length>0){let t=f.map(t=>{let r=y.find(e=>e.name===t);return r?{profile_id:e.id,passion_id:r.id}:null}).filter(Boolean);await n.O.from("profile_passions").insert(t)}q.push("/dashboard")}catch(e){console.error("Error completing onboarding:",e),E(e.message||"Failed to save profile")}finally{d(!1)}};return r?a.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:"Loading..."}):a.jsx("div",{className:"min-h-screen bg-black text-white flex flex-col items-center justify-center p-6",children:(0,a.jsxs)("div",{className:"w-full max-w-2xl bg-gray-900 p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[(0,a.jsxs)("div",{className:"mb-8 text-center",children:[a.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"Welcome to Skillogue!"}),a.jsx("p",{className:"text-gray-400 mt-2",children:"Let's set up your profile to find your tribe."})]}),a.jsx("div",{className:"w-full bg-gray-800 h-2 rounded-full mb-8",children:a.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-500",style:{width:`${e/3*100}%`}})}),O&&a.jsx("div",{className:"bg-red-900/50 border border-red-500 text-red-200 p-4 rounded-lg mb-6 text-center",children:O}),1===e&&(0,a.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"Step 1: The Basics"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"First Name"}),a.jsx("input",{type:"text",name:"first_name",value:u.first_name,onChange:Z,className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none",placeholder:"Jane"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Last Name"}),a.jsx("input",{type:"text",name:"last_name",value:u.last_name,onChange:Z,className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none",placeholder:"Doe"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Age"}),a.jsx("input",{type:"number",name:"age",value:u.age,onChange:Z,className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none",placeholder:"25",min:"18"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Gender"}),(0,a.jsxs)("select",{name:"gender",value:u.gender,onChange:Z,className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none",children:[a.jsx("option",{value:"",children:"Select Gender"}),a.jsx("option",{value:"Male",children:"Male"}),a.jsx("option",{value:"Female",children:"Female"}),a.jsx("option",{value:"Non-binary",children:"Non-binary"}),a.jsx("option",{value:"Other",children:"Other"}),a.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"About Me"}),a.jsx("textarea",{name:"about_me",value:u.about_me,onChange:Z,rows:3,className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none",placeholder:"I love hiking and coding..."})]})]}),2===e&&(0,a.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"Step 2: Location"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Country"}),(0,a.jsxs)("select",{name:"country",value:m.country,onChange:L,className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none",children:[a.jsx("option",{value:"",children:"Select Country"}),N.map(e=>a.jsx("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Region/State"}),(0,a.jsxs)("select",{name:"region",value:m.region,onChange:L,className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none",disabled:!m.country,children:[a.jsx("option",{value:"",children:"Select Region"}),P.map(e=>a.jsx("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"City"}),(0,a.jsxs)("select",{name:"city",value:m.city,onChange:L,className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none",disabled:!m.region&&!m.country,children:[a.jsx("option",{value:"",children:"Select City"}),S.map(e=>a.jsx("option",{value:e,children:e},e))]})]})]})]}),3===e&&(0,a.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"Step 3: Interests & Languages"}),(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx(c.Z,{label:"Passions (Select at least 3)",options:y,selected:f,onChange:b,placeholder:"Select your passions..."}),a.jsx(c.Z,{label:"Languages",options:w,selected:p,onChange:h,placeholder:"Select languages you speak..."})]})]}),(0,a.jsxs)("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-800",children:[e>1?(0,a.jsxs)("button",{onClick:()=>{E(""),t(e=>e-1)},className:"flex items-center gap-2 px-6 py-2 text-gray-400 hover:text-white transition",children:[a.jsx(l.Z,{size:20})," Back"]}):a.jsx("div",{}),e<3?(0,a.jsxs)("button",{onClick:()=>{if(1===e){if(!u.first_name||!u.last_name||!u.age||!u.gender){E("Please fill in all required fields.");return}}else if(2===e&&(!m.country||!m.city)){E("Please select your location.");return}E(""),t(e=>e+1)},className:"flex items-center gap-2 px-6 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-lg text-white font-semibold transition",children:["Next ",a.jsx(i,{size:20})]}):a.jsx("button",{onClick:M,className:"flex items-center gap-2 px-8 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 hover:shadow-lg rounded-lg text-white font-bold transition transform hover:scale-105",children:"Complete Profile"})]})]})})}},9024:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r(326),s=r(7577),n=r(4019);let o=(0,r(2881).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),l=({options:e,selected:t,onChange:r,label:l,placeholder:i})=>{let[c,d]=(0,s.useState)(!1),[u,g]=(0,s.useState)(""),m=(0,s.useRef)(null);(0,s.useEffect)(()=>{function e(e){m.current&&!m.current.contains(e.target)&&d(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[m]);let x=e=>{t.includes(e)?r(t.filter(t=>t!==e)):r([...t,e])},p=e=>{r(t.filter(t=>t!==e))},h=e.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())),f=`multiselect-${l.replace(/\s+/g,"-").toLowerCase()}`;return(0,a.jsxs)("div",{className:"relative",ref:m,children:[a.jsx("label",{htmlFor:f,className:"block text-sm font-medium text-gray-300 mb-2",children:l}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 p-2 border border-gray-700 rounded-lg bg-gray-900 cursor-text",onClick:()=>d(!0),children:[t.map(e=>(0,a.jsxs)("span",{className:"flex items-center gap-2 bg-indigo-600 text-white text-sm px-2 py-1 rounded-full",children:[e,a.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),p(e)},className:"text-white hover:text-gray-200 focus:outline-none","aria-label":`Remove ${e}`,children:a.jsx(n.Z,{size:14})})]},e)),a.jsx("input",{id:f,type:"text",className:"flex-grow bg-transparent border-none focus:ring-0 text-white placeholder-gray-500 min-w-[100px]",placeholder:0===t.length?i||"Select...":"",value:u,onChange:e=>g(e.target.value),onFocus:()=>d(!0),"aria-expanded":c,"aria-haspopup":"listbox"}),a.jsx(o,{className:"text-gray-400 ml-auto self-center",size:20})]}),c&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-gray-800 border border-gray-700 rounded-lg shadow-lg max-h-60 overflow-y-auto",role:"listbox",children:h.length>0?h.map(e=>a.jsx("div",{onClick:()=>x(e.name),className:`px-4 py-2 cursor-pointer hover:bg-gray-700 ${t.includes(e.name)?"bg-indigo-900/50 text-indigo-300":"text-gray-300"}`,role:"option","aria-selected":t.includes(e.name),children:e.name},e.name)):a.jsx("div",{className:"px-4 py-2 text-gray-500",role:"option","aria-disabled":"true",children:"No options found"})})]})}},3058:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(326),s=r(7577),n=r(5047),o=r(373),l=r(7506);let i=({children:e})=>{let[t,r]=(0,s.useState)(!0),[i,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(!1);(0,n.useRouter)();let g=(0,n.usePathname)();return((0,s.useEffect)(()=>{(async()=>{let{data:{session:e}}=await o.O.auth.getSession();if(c(e),e?.user){let{data:t,error:r}=await o.O.from("profiles").select(`
                        first_name,
                        last_name,
                        about_me,
                        age,
                        gender,
                        location_id,
                        passions_count: profile_passions(count),
                        languages_count: profile_languages(count)
                    `).eq("id",e.user.id).single();r?(console.error("Error checking profile status:",r),u(!1)):u(!!(t.first_name&&t.last_name&&t.age&&t.gender&&t.location_id&&t.passions_count?.[0]?.count>0&&t.languages_count?.[0]?.count>0))}r(!1)})()},[]),t)?a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-black",children:a.jsx(l.Z,{className:"w-12 h-12 text-indigo-500 animate-spin"})}):i&&(d||"/onboarding"===g)&&(!d||"/onboarding"!==g)?a.jsx(a.Fragment,{children:e}):null}},9288:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`C:\Users\wcatalfamo\Projects\Personal\skillogue-web\src\app\onboarding\layout.tsx#default`)},8435:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(8570).createProxy)(String.raw`C:\Users\wcatalfamo\Projects\Personal\skillogue-web\src\app\onboarding\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[377,56],()=>r(5173));module.exports=a})();