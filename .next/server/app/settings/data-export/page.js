(()=>{var e={};e.id=853,e.ids=[853],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5637:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),a(2077),a(4625),a(6513),a(5866);var s=a(3191),r=a(8716),i=a(7922),n=a.n(i),o=a(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);a.d(t,l);let c=["",{children:["settings",{children:["data-export",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,2077)),"C:\\Users\\wcatalfamo\\Projects\\Personal\\skillogue-web\\src\\app\\settings\\data-export\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,4625)),"C:\\Users\\wcatalfamo\\Projects\\Personal\\skillogue-web\\src\\app\\settings\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,6513)),"C:\\Users\\wcatalfamo\\Projects\\Personal\\skillogue-web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\wcatalfamo\\Projects\\Personal\\skillogue-web\\src\\app\\settings\\data-export\\page.tsx"],u="/settings/data-export/page",p={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/settings/data-export/page",pathname:"/settings/data-export",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3496:(e,t,a)=>{let s={"1b86dfebe917da4f722be2ce4438224c280ac1ae":()=>Promise.resolve().then(a.bind(a,3891)).then(e=>e.getUserData)};async function r(e,...t){return(await s[e]()).apply(null,t)}e.exports={"1b86dfebe917da4f722be2ce4438224c280ac1ae":r.bind(null,"1b86dfebe917da4f722be2ce4438224c280ac1ae")}},9529:(e,t,a)=>{Promise.resolve().then(a.bind(a,2453))},6629:(e,t,a)=>{Promise.resolve().then(a.bind(a,4310))},2453:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(326),r=a(7577);a(5424);var i=(0,a(6242).$)("1b86dfebe917da4f722be2ce4438224c280ac1ae"),n=a(6333),o=a(2881);let l=(0,o.Z)("file-json",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);var c=a(7506);let d=(0,o.Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var u=a(434),p=a(381);function m(){let[e,t]=(0,r.useState)(!1),a=async()=>{t(!0);try{let e=await i(),t=JSON.stringify(e,null,2),a=new Blob([t],{type:"application/json"}),s=URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.download=`skillogue-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s),p.Am.success("Data export started")}catch(e){console.error("Export failed:",e),p.Am.error("Failed to export data")}finally{t(!1)}};return s.jsx("div",{className:"min-h-screen bg-black text-white p-6",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,s.jsxs)(u.default,{href:"/settings",className:"text-gray-400 hover:text-white transition flex items-center gap-2 mb-8",children:[s.jsx(n.Z,{size:20}),"Back to Settings"]}),(0,s.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("div",{className:"bg-indigo-600/20 p-3 rounded-full",children:s.jsx(l,{className:"w-8 h-8 text-indigo-500"})}),s.jsx("h1",{className:"text-2xl font-bold",children:"Export Your Data"})]}),s.jsx("p",{className:"text-gray-300 mb-6",children:"You have the right to access your personal data. Click the button below to download a copy of your data in JSON format. This includes your profile information, messages, and settings."}),(0,s.jsxs)("div",{className:"bg-gray-800/50 p-4 rounded-lg mb-8 text-sm text-gray-400",children:[s.jsx("p",{className:"mb-2 font-semibold text-gray-300",children:"What's included:"}),(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:"Profile details (Name, Bio, Location)"}),s.jsx("li",{children:"Account information (Email, ID)"}),s.jsx("li",{children:"Your Passions and Languages"}),s.jsx("li",{children:"Message history (Sent and Received)"}),s.jsx("li",{children:"Blocked users list"})]})]}),s.jsx("button",{onClick:a,disabled:e,className:"w-full flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white py-3 px-6 rounded-lg font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed",children:e?(0,s.jsxs)(s.Fragment,{children:[s.jsx(c.Z,{className:"animate-spin",size:20}),"Preparing Download..."]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(d,{size:20}),"Download My Data"]})})]})]})})}},4310:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(326),r=a(3058);function i({children:e}){return s.jsx(r.Z,{children:e})}},3058:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var s=a(326),r=a(7577),i=a(5047),n=a(373),o=a(7506);let l=({children:e})=>{let[t,a]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!1);(0,i.useRouter)();let p=(0,i.usePathname)();return((0,r.useEffect)(()=>{(async()=>{let{data:{session:e}}=await n.O.auth.getSession();if(c(e),e?.user){let{data:t,error:a}=await n.O.from("profiles").select(`
                        first_name,
                        last_name,
                        about_me,
                        age,
                        gender,
                        location_id,
                        passions_count: profile_passions(count),
                        languages_count: profile_languages(count)
                    `).eq("id",e.user.id).single();a?(console.error("Error checking profile status:",a),u(!1)):u(!!(t.first_name&&t.last_name&&t.age&&t.gender&&t.location_id&&t.passions_count?.[0]?.count>0&&t.languages_count?.[0]?.count>0))}a(!1)})()},[]),t)?s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-black",children:s.jsx(o.Z,{className:"w-12 h-12 text-indigo-500 animate-spin"})}):l&&(d||"/onboarding"===p)&&(!d||"/onboarding"!==p)?s.jsx(s.Fragment,{children:e}):null}},3891:(e,t,a)=>{"use strict";a.r(t),a.d(t,{getUserData:()=>i});var s=a(7745);a(6461);var r=a(7070);async function i(){let e=(0,r.e)(),{data:{user:t}}=await e.auth.getUser();if(!t)throw Error("Not authenticated");let a=t.id,{data:s}=await e.from("profiles").select("*").eq("id",a).single(),{data:i}=await e.from("profile_passions").select("passions(name)").eq("profile_id",a),{data:n}=await e.from("profile_languages").select("languages(name)").eq("profile_id",a),{data:o}=await e.from("messages").select("*").eq("sender_id",a),{data:l}=await e.from("messages").select("*").eq("receiver_id",a),{data:c}=await e.from("blocks").select("*").eq("blocker_id",a);return{user:{id:a,email:t.email,...s},passions:i?.map(e=>e.passions?.name)||[],languages:n?.map(e=>e.languages?.name)||[],messages:{sent:o||[],received:l||[]},blocked_users:c||[]}}(0,a(5723).h)([i]),(0,s.j)("1b86dfebe917da4f722be2ce4438224c280ac1ae",i)},2077:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(8570).createProxy)(String.raw`C:\Users\wcatalfamo\Projects\Personal\skillogue-web\src\app\settings\data-export\page.tsx#default`)},4625:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(8570).createProxy)(String.raw`C:\Users\wcatalfamo\Projects\Personal\skillogue-web\src\app\settings\layout.tsx#default`)},7070:(e,t,a)=>{"use strict";a.d(t,{e:()=>i});var s=a(7868),r=a(3973);function i(){let e=(0,r.cookies)();return(0,s.createServerClient)("https://oyucjqjijrtipvssqxbc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im95dWNqcWppanJ0aXB2c3NxeGJjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQxNjM0NzUsImV4cCI6MjA2OTczOTQ3NX0.xzU_Qw-z0WbtUoLEaVPTrSXEAuDZt708p9kq2X6rsvo",{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:a,options:s})=>e.set(t,a,s))}catch{}}}})}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[377,414,56],()=>a(5637));module.exports=s})();