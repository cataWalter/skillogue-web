(()=>{var e={};e.id=853,e.ids=[853],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},75637:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(72077),s(74625),s(39252),s(7629),s(27683);var t=s(23191),r=s(88716),i=s(37922),n=s.n(i),o=s(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(a,l);let c=["",{children:["settings",{children:["data-export",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,72077)),"C:\\Users\\wcatalfamo\\Projects\\Personal\\skillogue-web\\src\\app\\settings\\data-export\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,74625)),"C:\\Users\\wcatalfamo\\Projects\\Personal\\skillogue-web\\src\\app\\settings\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,39252)),"C:\\Users\\wcatalfamo\\Projects\\Personal\\skillogue-web\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,7629)),"C:\\Users\\wcatalfamo\\Projects\\Personal\\skillogue-web\\src\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,27683)),"C:\\Users\\wcatalfamo\\Projects\\Personal\\skillogue-web\\src\\app\\not-found.tsx"]}],d=["C:\\Users\\wcatalfamo\\Projects\\Personal\\skillogue-web\\src\\app\\settings\\data-export\\page.tsx"],u="/settings/data-export/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/settings/data-export/page",pathname:"/settings/data-export",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},33496:(e,a,s)=>{let t={"1b86dfebe917da4f722be2ce4438224c280ac1ae":()=>Promise.resolve().then(s.bind(s,13891)).then(e=>e.getUserData)};async function r(e,...a){return(await t[e]()).apply(null,a)}e.exports={"1b86dfebe917da4f722be2ce4438224c280ac1ae":r.bind(null,"1b86dfebe917da4f722be2ce4438224c280ac1ae")}},49529:(e,a,s)=>{Promise.resolve().then(s.bind(s,72453))},76629:(e,a,s)=>{Promise.resolve().then(s.bind(s,4310))},72453:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>m});var t=s(10326),r=s(17577);s(15424);var i=(0,s(46242).$)("1b86dfebe917da4f722be2ce4438224c280ac1ae"),n=s(86333),o=s(62881);let l=(0,o.Z)("file-json",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);var c=s(77506);let d=(0,o.Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var u=s(90434),p=s(40381);function m(){let[e,a]=(0,r.useState)(!1),s=async()=>{a(!0);try{let e=await i(),a=JSON.stringify(e,null,2),s=new Blob([a],{type:"application/json"}),t=URL.createObjectURL(s),r=document.createElement("a");r.href=t,r.download=`skillogue-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t),p.Am.success("Data export started")}catch(e){console.error("Export failed:",e),p.Am.error("Failed to export data")}finally{a(!1)}};return t.jsx("div",{className:"min-h-screen bg-black text-white p-6",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,t.jsxs)(u.default,{href:"/settings",className:"text-gray-400 hover:text-white transition flex items-center gap-2 mb-8",children:[t.jsx(n.Z,{size:20}),"Back to Settings"]}),(0,t.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[t.jsx("div",{className:"bg-indigo-600/20 p-3 rounded-full",children:t.jsx(l,{className:"w-8 h-8 text-indigo-500"})}),t.jsx("h1",{className:"text-2xl font-bold",children:"Export Your Data"})]}),t.jsx("p",{className:"text-gray-300 mb-6",children:"You have the right to access your personal data. Click the button below to download a copy of your data in JSON format. This includes your profile information, messages, and settings."}),(0,t.jsxs)("div",{className:"bg-gray-800/50 p-4 rounded-lg mb-8 text-sm text-gray-400",children:[t.jsx("p",{className:"mb-2 font-semibold text-gray-300",children:"What's included:"}),(0,t.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[t.jsx("li",{children:"Profile details (Name, Bio, Location)"}),t.jsx("li",{children:"Account information (Email, ID)"}),t.jsx("li",{children:"Your Passions and Languages"}),t.jsx("li",{children:"Message history (Sent and Received)"}),t.jsx("li",{children:"Blocked users list"})]})]}),t.jsx("button",{onClick:s,disabled:e,className:"w-full flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white py-3 px-6 rounded-lg font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed",children:e?(0,t.jsxs)(t.Fragment,{children:[t.jsx(c.Z,{className:"animate-spin",size:20}),"Preparing Download..."]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(d,{size:20}),"Download My Data"]})})]})]})})}},4310:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>i});var t=s(10326),r=s(43058);function i({children:e}){return t.jsx(r.Z,{children:e})}},43058:(e,a,s)=>{"use strict";s.d(a,{Z:()=>l});var t=s(10326),r=s(17577),i=s(35047),n=s(10373),o=s(77506);let l=({children:e})=>{let[a,s]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!1);(0,i.useRouter)();let p=(0,i.usePathname)();return((0,r.useEffect)(()=>{(async()=>{let{data:{session:e}}=await n.O.auth.getSession();if(c(e),e?.user){let{data:a,error:s}=await n.O.from("profiles").select(`
                        first_name,
                        last_name,
                        about_me,
                        age,
                        gender,
                        location_id,
                        passions_count: profile_passions(count),
                        languages_count: profile_languages(count)
                    `).eq("id",e.user.id).single();s?(console.error("Error checking profile status:",s),u(!1)):u(!!(a.first_name&&a.last_name&&a.age&&a.gender&&a.location_id&&a.passions_count?.[0]?.count>0&&a.languages_count?.[0]?.count>0))}s(!1)})()},[]),a)?t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-black",children:t.jsx(o.Z,{className:"w-12 h-12 text-indigo-500 animate-spin"})}):l&&(d||"/onboarding"===p)&&(!d||"/onboarding"!==p)?t.jsx(t.Fragment,{children:e}):null}},13891:(e,a,s)=>{"use strict";s.r(a),s.d(a,{getUserData:()=>i});var t=s(27745);s(26461);var r=s(57070);async function i(){let e=(0,r.e)(),{data:{user:a}}=await e.auth.getUser();if(!a)throw Error("Not authenticated");let s=a.id,{data:t}=await e.from("profiles").select("*").eq("id",s).single(),{data:i}=await e.from("profile_passions").select("passions(name)").eq("profile_id",s),{data:n}=await e.from("profile_languages").select("languages(name)").eq("profile_id",s),{data:o}=await e.from("messages").select("*").eq("sender_id",s),{data:l}=await e.from("messages").select("*").eq("receiver_id",s),{data:c}=await e.from("blocks").select("*").eq("blocker_id",s);return{user:{id:s,email:a.email,...t},passions:i?.map(e=>Array.isArray(e.passions)?e.passions[0]?.name:e.passions?.name)||[],languages:n?.map(e=>Array.isArray(e.languages)?e.languages[0]?.name:e.languages?.name)||[],messages:{sent:o||[],received:l||[]},blocked_users:c||[]}}(0,s(85723).h)([i]),(0,t.j)("1b86dfebe917da4f722be2ce4438224c280ac1ae",i)},72077:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(68570).createProxy)(String.raw`C:\Users\wcatalfamo\Projects\Personal\skillogue-web\src\app\settings\data-export\page.tsx#default`)},74625:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(68570).createProxy)(String.raw`C:\Users\wcatalfamo\Projects\Personal\skillogue-web\src\app\settings\layout.tsx#default`)},57070:(e,a,s)=>{"use strict";s.d(a,{e:()=>i});var t=s(97868),r=s(53973);function i(){let e=(0,r.cookies)();return(0,t.createServerClient)("https://oyucjqjijrtipvssqxbc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im95dWNqcWppanJ0aXB2c3NxeGJjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQxNjM0NzUsImV4cCI6MjA2OTczOTQ3NX0.xzU_Qw-z0WbtUoLEaVPTrSXEAuDZt708p9kq2X6rsvo",{cookies:{getAll:()=>e.getAll(),setAll(a){try{a.forEach(({name:a,value:s,options:t})=>e.set(a,s,t))}catch{}}}})}}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[880,762,383],()=>s(75637));module.exports=t})();