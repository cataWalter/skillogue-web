(()=>{var e={};e.id=702,e.ids=[702],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5599:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d}),a(8256),a(2834),a(6513),a(5866);var r=a(3191),t=a(8716),l=a(7922),o=a.n(l),i=a(5231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);a.d(s,n);let d=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,8256)),"C:\\Users\\wcatalfamo\\Projects\\Personal\\skillogue-web\\src\\app\\dashboard\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,2834)),"C:\\Users\\wcatalfamo\\Projects\\Personal\\skillogue-web\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,6513)),"C:\\Users\\wcatalfamo\\Projects\\Personal\\skillogue-web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\wcatalfamo\\Projects\\Personal\\skillogue-web\\src\\app\\dashboard\\page.tsx"],x="/dashboard/page",m={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8221:(e,s,a)=>{Promise.resolve().then(a.bind(a,7022))},3753:(e,s,a)=>{Promise.resolve().then(a.bind(a,4715))},7506:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});let r=(0,a(2881).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9508:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});let r=(0,a(2881).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},3634:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});let r=(0,a(2881).Z)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},7022:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>l});var r=a(326),t=a(3058);function l({children:e}){return r.jsx(t.Z,{children:e})}},4715:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>b});var r=a(326),t=a(7577),l=a(373),o=a(434),i=a(5047),n=a(617),d=a(9635),c=a(8307),x=a(1189),m=a(9508);let u=({profile:e})=>{let s=[];if(e.about_me||s.push({text:"Add a bio to tell people about yourself."}),e.passions_count<3&&s.push({text:"Add more passions to find better connections."}),0===e.languages_count&&s.push({text:"Add the languages you speak."}),0===s.length)return null;let a=(3-s.length)/3*100;return(0,r.jsxs)("div",{className:"bg-gray-900 p-6 rounded-2xl border border-gray-800",children:[r.jsx("h3",{className:"text-xl font-bold mb-3",children:"Complete Your Profile"}),r.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5 mb-4",children:r.jsx("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:`${a}%`}})}),r.jsx("ul",{className:"space-y-3",children:s.map((e,s)=>r.jsx("li",{children:(0,r.jsxs)(o.default,{href:"/edit-profile",className:"flex items-center justify-between text-sm text-gray-300 hover:text-white group transition-colors",children:[r.jsx("span",{children:e.text}),r.jsx(m.Z,{className:"h-4 w-4 text-indigo-400 opacity-70 group-hover:opacity-100"})]})},s))})]})};var h=a(3634);let p=({userPassions:e,userId:s})=>{let[a,i]=(0,t.useState)(null),[n,d]=(0,t.useState)([]),[c,m]=(0,t.useState)(!0);(0,t.useEffect)(()=>{if(e.length>0){let a=e[Math.floor(Math.random()*e.length)];i(a),(async()=>{m(!0);let{data:e,error:r}=await l.O.rpc("get_profiles_for_passion",{p_passion_id:a.passion_id,p_exclude_user_id:s,p_limit:5});r?console.error("Error fetching passion profiles:",r):d(e||[]),m(!1)})()}},[e,s]);let u=a?.passions[0]?.name;return!u||c&&0===n.length?null:(0,r.jsxs)("div",{className:"bg-gray-900 p-6 rounded-2xl border border-gray-800",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold mb-2",children:["Explore: ",u]}),(0,r.jsxs)("p",{className:"text-gray-400 text-sm mb-4",children:["Others who share your passion for ",u,"."]}),r.jsx("div",{className:"flex flex-wrap gap-3 mb-4",children:n.map(e=>r.jsx(o.default,{href:`/profile/${e.id}`,title:e.first_name||"User",children:r.jsx(x.Z,{seed:e.id,className:"w-10 h-10 rounded-full border-2 border-transparent hover:border-indigo-500"})},e.id))}),(0,r.jsxs)(o.default,{href:`/search?passion=${u}`,className:"inline-flex items-center gap-2 text-sm text-indigo-400 hover:underline",children:[r.jsx(h.Z,{size:14})," See more like-minded people"]})]})};var g=a(2326);let f=()=>(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[r.jsx(g.Z,{className:"h-12 w-3/4 sm:w-1/2 mb-8"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[1,2,3].map(e=>(0,r.jsxs)("div",{className:"bg-gray-900 p-6 rounded-2xl border border-gray-800 h-32",children:[r.jsx(g.Z,{className:"w-8 h-8 mb-2"}),r.jsx(g.Z,{className:"h-6 w-1/2 mb-2"}),r.jsx(g.Z,{className:"h-4 w-3/4"})]},e))}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,r.jsxs)("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 p-6 h-48",children:[r.jsx(g.Z,{className:"h-6 w-1/3 mb-4"}),r.jsx(g.Z,{className:"h-4 w-full mb-2"}),r.jsx(g.Z,{className:"h-4 w-full mb-2"}),r.jsx(g.Z,{className:"h-4 w-2/3"})]}),(0,r.jsxs)("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 p-6",children:[r.jsx(g.Z,{className:"h-6 w-1/3 mb-4"}),r.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,r.jsxs)("div",{className:"bg-gray-800 p-4 rounded-xl flex items-center gap-4",children:[r.jsx(g.Z,{className:"w-12 h-12 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx(g.Z,{className:"h-4 w-1/3 mb-2"}),r.jsx(g.Z,{className:"h-3 w-1/2"})]})]},e))})]})]}),(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 p-6 h-64",children:[r.jsx(g.Z,{className:"h-6 w-1/2 mb-4"}),r.jsx(g.Z,{className:"h-32 w-full rounded-xl"})]}),(0,r.jsxs)("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 p-6",children:[r.jsx(g.Z,{className:"h-6 w-1/2 mb-4"}),r.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,r.jsxs)("div",{className:"bg-gray-800 p-4 rounded-xl flex items-center gap-3",children:[r.jsx(g.Z,{className:"w-10 h-10 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx(g.Z,{className:"h-3 w-1/2 mb-1"}),r.jsx(g.Z,{className:"h-2 w-1/3"})]})]},e))})]})]})]})]}),b=()=>{let[e,s]=(0,t.useState)(null),[a,m]=(0,t.useState)([]),[h,g]=(0,t.useState)([]),[b,j]=(0,t.useState)([]),[N,y]=(0,t.useState)(!0),_=(0,i.useRouter)();return((0,t.useEffect)(()=>{(async()=>{let{data:{user:e}}=await l.O.auth.getUser();if(e){let[a,r,t,o]=await Promise.all([l.O.from("profiles").select(`
                        id,
                        first_name,
                        about_me,
                        passions_count: profile_passions(count),
                        languages_count: profile_languages(count)
                    `).eq("id",e.id).single(),l.O.rpc("get_recent_conversations",{current_user_id:e.id}),l.O.rpc("get_suggested_profiles",{current_user_id:e.id,p_limit:5}),l.O.from("profile_passions").select("passion_id, passions(name)").eq("profile_id",e.id)]);if(a.error||!a.data?.first_name){console.error("Profile incomplete or error fetching:",a.error),_.push("/onboarding");return}let i=a.data;s({...i,passions_count:i.passions_count[0]?.count||0,languages_count:i.languages_count[0]?.count||0}),r.error?console.error("Error fetching conversations:",r.error):m(r.data||[]),t.error?console.error("Error fetching suggestions:",t.error):g(t.data||[]),o.error?console.error("Error fetching passions:",o.error):j(o.data||[])}else _.push("/login");y(!1)})()},[_]),N)?r.jsx(f,{}):(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,r.jsxs)("h1",{className:"text-4xl font-extrabold text-white sm:text-5xl",children:["Welcome back, ",r.jsx("span",{className:"text-indigo-400",children:e?.first_name}),"!"]}),(0,r.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)(o.default,{href:"/messages",className:"bg-gray-900 p-6 rounded-2xl border border-gray-800 hover:border-purple-600 transition-all duration-300 transform hover:scale-105",children:[r.jsx(n.Z,{className:"h-8 w-8 text-purple-400 mb-2"}),r.jsx("h2",{className:"text-xl font-bold text-white",children:"Messages"}),r.jsx("p",{className:"mt-1 text-gray-400",children:"View your conversations"})]}),(0,r.jsxs)(o.default,{href:"/profile",className:"bg-gray-900 p-6 rounded-2xl border border-gray-800 hover:border-indigo-600 transition-all duration-300 transform hover:scale-105",children:[r.jsx(d.Z,{className:"h-8 w-8 text-indigo-400 mb-2"}),r.jsx("h2",{className:"text-xl font-bold text-white",children:"Your Profile"}),r.jsx("p",{className:"mt-1 text-gray-400",children:"Update your details"})]}),(0,r.jsxs)(o.default,{href:"/search",className:"bg-gray-900 p-6 rounded-2xl border border-gray-800 hover:border-pink-600 transition-all duration-300 transform hover:scale-105",children:[r.jsx(c.Z,{className:"h-8 w-8 text-pink-400 mb-2"}),r.jsx("h2",{className:"text-xl font-bold text-white",children:"Discover"}),r.jsx("p",{className:"mt-1 text-gray-400",children:"Find new connections"})]})]}),(0,r.jsxs)("div",{className:"mt-12 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[e&&r.jsx(u,{profile:e}),(0,r.jsxs)("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Recent Conversations"}),a.length>0?r.jsx("div",{className:"space-y-4",children:a.map(e=>r.jsx(o.default,{href:`/messages?conversation=${e.conversation_id}`,className:"block bg-gray-800 p-4 rounded-xl hover:bg-gray-700 transition",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx(x.Z,{seed:e.user_id,className:"w-12 h-12"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("p",{className:"text-white font-semibold truncate",children:[e.first_name," ",e.last_name]}),r.jsx("p",{className:"text-gray-400 text-sm truncate",children:e.last_message})]}),r.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:e.last_message_time?new Date(e.last_message_time).toLocaleDateString():""})]})},e.conversation_id))}):r.jsx("p",{className:"text-gray-400",children:"No conversations yet. Start exploring!"})]})]}),(0,r.jsxs)("div",{className:"space-y-8",children:[r.jsx(p,{userPassions:b,userId:e?.id||""}),(0,r.jsxs)("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Suggested for You"}),h.length>0?r.jsx("div",{className:"space-y-4",children:h.map(e=>r.jsx(o.default,{href:`/user/${e.id}`,className:"block bg-gray-800 p-4 rounded-xl hover:bg-gray-700 transition",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx(x.Z,{seed:e.id,className:"w-10 h-10"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-white font-medium text-sm",children:e.first_name}),(0,r.jsxs)("p",{className:"text-indigo-400 text-xs",children:[e.shared_passions_count," shared passions"]})]})]})},e.id))}):r.jsx("p",{className:"text-gray-400 text-sm",children:"Complete your profile to get suggestions!"})]})]})]})]})}},3058:(e,s,a)=>{"use strict";a.d(s,{Z:()=>n});var r=a(326),t=a(7577),l=a(5047),o=a(373),i=a(7506);let n=({children:e})=>{let[s,a]=(0,t.useState)(!0),[n,d]=(0,t.useState)(null),[c,x]=(0,t.useState)(!1);(0,l.useRouter)();let m=(0,l.usePathname)();return((0,t.useEffect)(()=>{(async()=>{let{data:{session:e}}=await o.O.auth.getSession();if(d(e),e?.user){let{data:s,error:a}=await o.O.from("profiles").select(`
                        first_name,
                        last_name,
                        about_me,
                        age,
                        gender,
                        location_id,
                        passions_count: profile_passions(count),
                        languages_count: profile_languages(count)
                    `).eq("id",e.user.id).single();a?(console.error("Error checking profile status:",a),x(!1)):x(!!(s.first_name&&s.last_name&&s.age&&s.gender&&s.location_id&&s.passions_count?.[0]?.count>0&&s.languages_count?.[0]?.count>0))}a(!1)})()},[]),s)?r.jsx("div",{className:"flex items-center justify-center min-h-screen bg-black",children:r.jsx(i.Z,{className:"w-12 h-12 text-indigo-500 animate-spin"})}):n&&(c||"/onboarding"===m)&&(!c||"/onboarding"!==m)?r.jsx(r.Fragment,{children:e}):null}},2326:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});var r=a(326);a(7577);let t=({className:e})=>r.jsx("div",{className:`animate-pulse bg-gray-800 rounded ${e}`})},2834:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(8570).createProxy)(String.raw`C:\Users\wcatalfamo\Projects\Personal\skillogue-web\src\app\dashboard\layout.tsx#default`)},8256:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(8570).createProxy)(String.raw`C:\Users\wcatalfamo\Projects\Personal\skillogue-web\src\app\dashboard\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[377,56],()=>a(5599));module.exports=r})();