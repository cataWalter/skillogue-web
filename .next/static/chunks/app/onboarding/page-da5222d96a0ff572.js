(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8461],{1597:function(e,t,r){Promise.resolve().then(r.bind(r,7445))},2660:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2489:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9205).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},7445:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var n=r(7437),a=r(2265),s=r(7905),i=r(9376),o=r(2660);let l=(0,r(9205).Z)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var c=r(3253),d=()=>{let[e,t]=(0,a.useState)(1),[r,d]=(0,a.useState)(!0),[u,g]=(0,a.useState)({first_name:"",last_name:"",about_me:"",age:"",gender:""}),[m,x]=(0,a.useState)({city:"",region:"",country:""}),[h,f]=(0,a.useState)([]),[p,b]=(0,a.useState)([]),[y,j]=(0,a.useState)([]),[v,w]=(0,a.useState)([]),[N,S]=(0,a.useState)([]),[k,_]=(0,a.useState)([]),[C,I]=(0,a.useState)([]),[O,P]=(0,a.useState)(""),E=(0,i.useRouter)();(0,a.useEffect)(()=>{(async()=>{let{data:{user:e}}=await s.O.auth.getUser();if(!e){E.push("/login");return}let{data:t}=await s.O.from("languages").select("id, name");w(t||[]);let{data:r}=await s.O.from("passions").select("id, name");j(r||[]);let{data:n}=await s.O.rpc("get_distinct_countries");S((null==n?void 0:n.map(e=>e.country))||[]),d(!1)})()},[E]),(0,a.useEffect)(()=>{m.country?(async()=>{let{data:e,error:t}=await s.O.rpc("get_distinct_regions",{p_country:m.country});t?console.error("Error fetching regions:",t):_(e.map(e=>e.region).filter(Boolean))})():_([])},[m.country]),(0,a.useEffect)(()=>{m.country?(async()=>{let{data:e,error:t}=await s.O.rpc("get_distinct_cities",{p_country:m.country,p_region:m.region||null});t?console.error("Error fetching cities:",t):I(e.map(e=>e.city))})():I([])},[m.country,m.region]);let Z=e=>{let{name:t,value:r}=e.target;g(e=>({...e,[t]:r}))},z=e=>{let{name:t,value:r}=e.target;x(e=>{let n={...e,[t]:r};return"country"===t&&(n.region="",n.city=""),n})},L=async()=>{if(p.length<3){P("Please select at least 3 passions.");return}d(!0);try{let{data:{user:e}}=await s.O.auth.getUser();if(!e)throw Error("No user found");let t=null;if(m.city&&m.country){let{data:e,error:r}=await s.O.from("locations").select("id").eq("city",m.city).eq("region",m.region||"").eq("country",m.country).maybeSingle();if(r)throw r;if(e)t=e.id;else{let{data:e,error:r}=await s.O.from("locations").insert({city:m.city,region:m.region||"",country:m.country}).select().single();if(r)throw r;t=e.id}}let{error:r}=await s.O.from("profiles").upsert({id:e.id,...u,age:parseInt(u.age),location_id:t,updated_at:new Date().toISOString()});if(r)throw r;if(h.length>0){let t=h.map(t=>{let r=v.find(e=>e.name===t);return r?{profile_id:e.id,language_id:r.id}:null}).filter(Boolean);await s.O.from("profile_languages").insert(t)}if(p.length>0){let t=p.map(t=>{let r=y.find(e=>e.name===t);return r?{profile_id:e.id,passion_id:r.id}:null}).filter(Boolean);await s.O.from("profile_passions").insert(t)}E.push("/dashboard")}catch(e){console.error("Error completing onboarding:",e),P(e instanceof Error?e.message:"Failed to save profile")}finally{d(!1)}};return r?(0,n.jsx)("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:"Loading..."}):(0,n.jsx)("div",{className:"min-h-screen bg-black text-white flex flex-col items-center justify-center p-6",children:(0,n.jsxs)("div",{className:"w-full max-w-2xl bg-gray-900 p-8 rounded-2xl border border-gray-800 shadow-2xl",children:[(0,n.jsxs)("div",{className:"mb-8 text-center",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"Welcome to Skillogue!"}),(0,n.jsx)("p",{className:"text-gray-400 mt-2",children:"Let's set up your profile to find your tribe."})]}),(0,n.jsx)("div",{className:"w-full bg-gray-800 h-2 rounded-full mb-8",children:(0,n.jsx)("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(e/3*100,"%")}})}),O&&(0,n.jsx)("div",{className:"bg-red-900/50 border border-red-500 text-red-200 p-4 rounded-lg mb-6 text-center",children:O}),1===e&&(0,n.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Step 1: The Basics"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"First Name"}),(0,n.jsx)("input",{type:"text",name:"first_name",value:u.first_name,onChange:Z,className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none",placeholder:"Jane"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Last Name"}),(0,n.jsx)("input",{type:"text",name:"last_name",value:u.last_name,onChange:Z,className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none",placeholder:"Doe"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Age"}),(0,n.jsx)("input",{type:"number",name:"age",value:u.age,onChange:Z,className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none",placeholder:"25",min:"18"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Gender"}),(0,n.jsxs)("select",{name:"gender",value:u.gender,onChange:Z,className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none",children:[(0,n.jsx)("option",{value:"",children:"Select Gender"}),(0,n.jsx)("option",{value:"Male",children:"Male"}),(0,n.jsx)("option",{value:"Female",children:"Female"}),(0,n.jsx)("option",{value:"Non-binary",children:"Non-binary"}),(0,n.jsx)("option",{value:"Other",children:"Other"}),(0,n.jsx)("option",{value:"Prefer not to say",children:"Prefer not to say"})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"About Me"}),(0,n.jsx)("textarea",{name:"about_me",value:u.about_me,onChange:Z,rows:3,className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none",placeholder:"I love hiking and coding..."})]})]}),2===e&&(0,n.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Step 2: Location"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Country"}),(0,n.jsxs)("select",{name:"country",value:m.country,onChange:z,className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none",children:[(0,n.jsx)("option",{value:"",children:"Select Country"}),N.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Region/State"}),(0,n.jsxs)("select",{name:"region",value:m.region,onChange:z,className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none",disabled:!m.country,children:[(0,n.jsx)("option",{value:"",children:"Select Region"}),k.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"City"}),(0,n.jsxs)("select",{name:"city",value:m.city,onChange:z,className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none",disabled:!m.region&&!m.country,children:[(0,n.jsx)("option",{value:"",children:"Select City"}),C.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]})]})]}),3===e&&(0,n.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Step 3: Interests & Languages"}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(c.Z,{label:"Passions (Select at least 3)",options:y,selected:p,onChange:b,placeholder:"Select your passions..."}),(0,n.jsx)(c.Z,{label:"Languages",options:v,selected:h,onChange:f,placeholder:"Select languages you speak..."})]})]}),(0,n.jsxs)("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-800",children:[e>1?(0,n.jsxs)("button",{onClick:()=>{P(""),t(e=>e-1)},className:"flex items-center gap-2 px-6 py-2 text-gray-400 hover:text-white transition",children:[(0,n.jsx)(o.Z,{size:20})," Back"]}):(0,n.jsx)("div",{}),e<3?(0,n.jsxs)("button",{onClick:()=>{if(1===e){if(!u.first_name||!u.last_name||!u.age||!u.gender){P("Please fill in all required fields.");return}}else if(2===e&&(!m.country||!m.city)){P("Please select your location.");return}P(""),t(e=>e+1)},className:"flex items-center gap-2 px-6 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-lg text-white font-semibold transition",children:["Next ",(0,n.jsx)(l,{size:20})]}):(0,n.jsx)("button",{onClick:L,className:"flex items-center gap-2 px-8 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 hover:shadow-lg rounded-lg text-white font-bold transition transform hover:scale-105",children:"Complete Profile"})]})]})})}},3253:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(7437),a=r(2265),s=r(2489);let i=(0,r(9205).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var o=e=>{let{options:t,selected:r,onChange:o,label:l,placeholder:c}=e,[d,u]=(0,a.useState)(!1),[g,m]=(0,a.useState)(""),x=(0,a.useRef)(null);(0,a.useEffect)(()=>{function e(e){x.current&&!x.current.contains(e.target)&&u(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[x]);let h=e=>{r.includes(e)?o(r.filter(t=>t!==e)):o([...r,e])},f=e=>{o(r.filter(t=>t!==e))},p=t.filter(e=>e.name.toLowerCase().includes(g.toLowerCase())),b="multiselect-".concat(l.replace(/\s+/g,"-").toLowerCase());return(0,n.jsxs)("div",{className:"relative",ref:x,children:[(0,n.jsx)("label",{htmlFor:b,className:"block text-sm font-medium text-gray-300 mb-2",children:l}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2 p-2 border border-gray-700 rounded-lg bg-gray-900 cursor-text",onClick:()=>u(!0),children:[r.map(e=>(0,n.jsxs)("span",{className:"flex items-center gap-2 bg-indigo-600 text-white text-sm px-2 py-1 rounded-full",children:[e,(0,n.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),f(e)},className:"text-white hover:text-gray-200 focus:outline-none","aria-label":"Remove ".concat(e),children:(0,n.jsx)(s.Z,{size:14})})]},e)),(0,n.jsx)("input",{id:b,type:"text",role:"combobox","aria-controls":"".concat(b,"-listbox"),className:"flex-grow bg-transparent border-none focus:ring-0 text-white placeholder-gray-500 min-w-[100px]",placeholder:0===r.length?c||"Select...":"",value:g,onChange:e=>m(e.target.value),onFocus:()=>u(!0),"aria-expanded":d,"aria-haspopup":"listbox"}),(0,n.jsx)(i,{className:"text-gray-400 ml-auto self-center",size:20})]}),d&&(0,n.jsx)("div",{id:"".concat(b,"-listbox"),className:"absolute z-10 w-full mt-1 bg-gray-800 border border-gray-700 rounded-lg shadow-lg max-h-60 overflow-y-auto",role:"listbox",children:p.length>0?p.map(e=>(0,n.jsx)("div",{onClick:()=>h(e.name),className:"px-4 py-2 cursor-pointer hover:bg-gray-700 ".concat(r.includes(e.name)?"bg-indigo-900/50 text-indigo-300":"text-gray-300"),role:"option","aria-selected":r.includes(e.name),children:e.name},e.name)):(0,n.jsx)("div",{className:"px-4 py-2 text-gray-500",children:"No options found"})})]})}},7905:function(e,t,r){"use strict";r.d(t,{O:function(){return n}});let n=(0,r(9066).eI)("https://oyucjqjijrtipvssqxbc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im95dWNqcWppanJ0aXB2c3NxeGJjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQxNjM0NzUsImV4cCI6MjA2OTczOTQ3NX0.xzU_Qw-z0WbtUoLEaVPTrSXEAuDZt708p9kq2X6rsvo")}},function(e){e.O(0,[8193,2971,2117,1744],function(){return e(e.s=1597)}),_N_E=e.O()}]);