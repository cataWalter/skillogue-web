(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{5861:function(e,s,a){Promise.resolve().then(a.bind(a,6879))},3417:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});let r=(0,a(9205).Z)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},3247:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});let r=(0,a(9205).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},5868:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});let r=(0,a(9205).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},2369:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});let r=(0,a(9205).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1239:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});let r=(0,a(9205).Z)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},9376:function(e,s,a){"use strict";var r=a(5475);a.o(r,"useParams")&&a.d(s,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(s,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(s,{useSearchParams:function(){return r.useSearchParams}})},6879:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return b}});var r=a(7437),t=a(2265),l=a(7905),n=a(7648),i=a(9376),o=a(3417),c=a(2369),d=a(3247),u=a(3764),x=a(5868),m=e=>{let{profile:s}=e,a=[];if(s.about_me||a.push({text:"Add a bio to tell people about yourself."}),s.passions_count<3&&a.push({text:"Add more passions to find better connections."}),0===s.languages_count&&a.push({text:"Add the languages you speak."}),0===a.length)return null;let t=(3-a.length)/3*100;return(0,r.jsxs)("div",{className:"bg-gray-900 p-6 rounded-2xl border border-gray-800",children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-3",children:"Complete Your Profile"}),(0,r.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2.5 mb-4",children:(0,r.jsx)("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:"".concat(t,"%")}})}),(0,r.jsx)("ul",{className:"space-y-3",children:a.map((e,s)=>(0,r.jsx)("li",{children:(0,r.jsxs)(n.default,{href:"/edit-profile",className:"flex items-center justify-between text-sm text-gray-300 hover:text-white group transition-colors",children:[(0,r.jsx)("span",{children:e.text}),(0,r.jsx)(x.Z,{className:"h-4 w-4 text-indigo-400 opacity-70 group-hover:opacity-100"})]})},s))})]})},h=a(1239),g=e=>{var s;let{userPassions:a,userId:i}=e,[o,c]=(0,t.useState)(null),[d,x]=(0,t.useState)([]),[m,g]=(0,t.useState)(!0);(0,t.useEffect)(()=>{if(a.length>0){let e=a[Math.floor(Math.random()*a.length)];c(e),(async()=>{g(!0);let{data:s,error:a}=await l.O.rpc("get_profiles_for_passion",{p_passion_id:e.passion_id,p_exclude_user_id:i,p_limit:5});a?console.error("Error fetching passion profiles:",a):x(s||[]),g(!1)})()}},[a,i]);let p=null==o?void 0:null===(s=o.passions[0])||void 0===s?void 0:s.name;return!p||m&&0===d.length?null:(0,r.jsxs)("div",{className:"bg-gray-900 p-6 rounded-2xl border border-gray-800",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold mb-2",children:["Explore: ",p]}),(0,r.jsxs)("p",{className:"text-gray-400 text-sm mb-4",children:["Others who share your passion for ",p,"."]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-3 mb-4",children:d.map(e=>(0,r.jsx)(n.default,{href:"/profile/".concat(e.id),title:e.first_name||"User",children:(0,r.jsx)(u.Z,{seed:e.id,className:"w-10 h-10 rounded-full border-2 border-transparent hover:border-indigo-500"})},e.id))}),(0,r.jsxs)(n.default,{href:"/search?passion=".concat(p),className:"inline-flex items-center gap-2 text-sm text-indigo-400 hover:underline",children:[(0,r.jsx)(h.Z,{size:14})," See more like-minded people"]})]})},p=a(4350),f=()=>(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,r.jsx)(p.Z,{className:"h-12 w-3/4 sm:w-1/2 mb-8"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[1,2,3].map(e=>(0,r.jsxs)("div",{className:"bg-gray-900 p-6 rounded-2xl border border-gray-800 h-32",children:[(0,r.jsx)(p.Z,{className:"w-8 h-8 mb-2"}),(0,r.jsx)(p.Z,{className:"h-6 w-1/2 mb-2"}),(0,r.jsx)(p.Z,{className:"h-4 w-3/4"})]},e))}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,r.jsxs)("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 p-6 h-48",children:[(0,r.jsx)(p.Z,{className:"h-6 w-1/3 mb-4"}),(0,r.jsx)(p.Z,{className:"h-4 w-full mb-2"}),(0,r.jsx)(p.Z,{className:"h-4 w-full mb-2"}),(0,r.jsx)(p.Z,{className:"h-4 w-2/3"})]}),(0,r.jsxs)("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 p-6",children:[(0,r.jsx)(p.Z,{className:"h-6 w-1/3 mb-4"}),(0,r.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,r.jsxs)("div",{className:"bg-gray-800 p-4 rounded-xl flex items-center gap-4",children:[(0,r.jsx)(p.Z,{className:"w-12 h-12 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(p.Z,{className:"h-4 w-1/3 mb-2"}),(0,r.jsx)(p.Z,{className:"h-3 w-1/2"})]})]},e))})]})]}),(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 p-6 h-64",children:[(0,r.jsx)(p.Z,{className:"h-6 w-1/2 mb-4"}),(0,r.jsx)(p.Z,{className:"h-32 w-full rounded-xl"})]}),(0,r.jsxs)("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 p-6",children:[(0,r.jsx)(p.Z,{className:"h-6 w-1/2 mb-4"}),(0,r.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,r.jsxs)("div",{className:"bg-gray-800 p-4 rounded-xl flex items-center gap-3",children:[(0,r.jsx)(p.Z,{className:"w-10 h-10 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(p.Z,{className:"h-3 w-1/2 mb-1"}),(0,r.jsx)(p.Z,{className:"h-2 w-1/3"})]})]},e))})]})]})]})]}),b=()=>{let[e,s]=(0,t.useState)(null),[a,x]=(0,t.useState)([]),[h,p]=(0,t.useState)([]),[b,j]=(0,t.useState)([]),[N,v]=(0,t.useState)(!0),y=(0,i.useRouter)();return((0,t.useEffect)(()=>{(async()=>{let{data:{user:e}}=await l.O.auth.getUser();if(e){var a,r,t;let[n,i,o,c]=await Promise.all([l.O.from("profiles").select("\n                        id,\n                        first_name,\n                        about_me,\n                        passions_count: profile_passions(count),\n                        languages_count: profile_languages(count)\n                    ").eq("id",e.id).single(),l.O.rpc("get_recent_conversations",{current_user_id:e.id}),l.O.rpc("get_suggested_profiles",{current_user_id:e.id,p_limit:5}),l.O.from("profile_passions").select("passion_id, passions(name)").eq("profile_id",e.id)]);if(n.error||!(null===(a=n.data)||void 0===a?void 0:a.first_name)){console.error("Profile incomplete or error fetching:",n.error),y.push("/onboarding");return}let d=n.data;s({...d,passions_count:(null===(r=d.passions_count[0])||void 0===r?void 0:r.count)||0,languages_count:(null===(t=d.languages_count[0])||void 0===t?void 0:t.count)||0}),i.error?console.error("Error fetching conversations:",i.error):x(i.data||[]),o.error?console.error("Error fetching suggestions:",o.error):p(o.data||[]),c.error?console.error("Error fetching passions:",c.error):j(c.data||[])}else y.push("/login");v(!1)})()},[y]),N)?(0,r.jsx)(f,{}):(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,r.jsxs)("h1",{className:"text-4xl font-extrabold text-white sm:text-5xl",children:["Welcome back, ",(0,r.jsx)("span",{className:"text-indigo-400",children:null==e?void 0:e.first_name}),"!"]}),(0,r.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)(n.default,{href:"/messages",className:"bg-gray-900 p-6 rounded-2xl border border-gray-800 hover:border-purple-600 transition-all duration-300 transform hover:scale-105",children:[(0,r.jsx)(o.Z,{className:"h-8 w-8 text-purple-400 mb-2"}),(0,r.jsx)("h2",{className:"text-xl font-bold text-white",children:"Messages"}),(0,r.jsx)("p",{className:"mt-1 text-gray-400",children:"View your conversations"})]}),(0,r.jsxs)(n.default,{href:"/profile",className:"bg-gray-900 p-6 rounded-2xl border border-gray-800 hover:border-indigo-600 transition-all duration-300 transform hover:scale-105",children:[(0,r.jsx)(c.Z,{className:"h-8 w-8 text-indigo-400 mb-2"}),(0,r.jsx)("h2",{className:"text-xl font-bold text-white",children:"Your Profile"}),(0,r.jsx)("p",{className:"mt-1 text-gray-400",children:"Update your details"})]}),(0,r.jsxs)(n.default,{href:"/search",className:"bg-gray-900 p-6 rounded-2xl border border-gray-800 hover:border-pink-600 transition-all duration-300 transform hover:scale-105",children:[(0,r.jsx)(d.Z,{className:"h-8 w-8 text-pink-400 mb-2"}),(0,r.jsx)("h2",{className:"text-xl font-bold text-white",children:"Discover"}),(0,r.jsx)("p",{className:"mt-1 text-gray-400",children:"Find new connections"})]})]}),(0,r.jsxs)("div",{className:"mt-12 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[e&&(0,r.jsx)(m,{profile:e}),(0,r.jsxs)("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 p-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Recent Conversations"}),a.length>0?(0,r.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,r.jsx)(n.default,{href:"/messages?conversation=".concat(e.conversation_id),className:"block bg-gray-800 p-4 rounded-xl hover:bg-gray-700 transition",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(u.Z,{seed:e.user_id,className:"w-12 h-12"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("p",{className:"text-white font-semibold truncate",children:[e.first_name," ",e.last_name]}),(0,r.jsx)("p",{className:"text-gray-400 text-sm truncate",children:e.last_message})]}),(0,r.jsx)("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:e.last_message_time?new Date(e.last_message_time).toLocaleDateString():""})]})},e.conversation_id))}):(0,r.jsx)("p",{className:"text-gray-400",children:"No conversations yet. Start exploring!"})]})]}),(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)(g,{userPassions:b,userId:(null==e?void 0:e.id)||""}),(0,r.jsxs)("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 p-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Suggested for You"}),h.length>0?(0,r.jsx)("div",{className:"space-y-4",children:h.map(e=>(0,r.jsx)(n.default,{href:"/user/".concat(e.id),className:"block bg-gray-800 p-4 rounded-xl hover:bg-gray-700 transition",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(u.Z,{seed:e.id,className:"w-10 h-10"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white font-medium text-sm",children:e.first_name}),(0,r.jsxs)("p",{className:"text-indigo-400 text-xs",children:[e.shared_passions_count," shared passions"]})]})]})},e.id))}):(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Complete your profile to get suggestions!"})]})]})]})]})}},3764:function(e,s,a){"use strict";var r=a(7437),t=a(2265),l=a(2523);let n=[a(5397),a(1210),a(4508),a(1241),a(336),a(9519),a(918),a(2250)];s.Z=e=>{let{seed:s,className:a,alt:i}=e,[o,c]=(0,t.useState)("");return((0,t.useEffect)(()=>{let e=e=>{let s=0;for(let a=0;a<e.length;a++)s=(s<<5)-s+e.charCodeAt(a)|0;return Math.abs(s)},a=async()=>{let a=e(s)%n.length,r=n[a];try{let e=await (0,l.$i)(r,{seed:s,radius:50,backgroundColor:["b6e3f4","c0aede","d1d4f9","ffd5dc","ffdfbf"]}),a=await e.toDataUri();c(a)}catch(e){console.error("Failed to generate avatar:",e)}};s&&a()},[s]),o)?(0,r.jsx)("img",{src:o,alt:i||"User Avatar",className:a||"w-12 h-12 rounded-full object-cover"}):(0,r.jsx)("div",{className:a||"w-12 h-12 rounded-full bg-gray-700 animate-pulse","aria-label":"Loading avatar"})}},4350:function(e,s,a){"use strict";var r=a(7437);a(2265),s.Z=e=>{let{className:s}=e;return(0,r.jsx)("div",{className:"animate-pulse bg-gray-800 rounded ".concat(s)})}},7905:function(e,s,a){"use strict";a.d(s,{O:function(){return r}});let r=(0,a(9066).eI)("https://oyucjqjijrtipvssqxbc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im95dWNqcWppanJ0aXB2c3NxeGJjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQxNjM0NzUsImV4cCI6MjA2OTczOTQ3NX0.xzU_Qw-z0WbtUoLEaVPTrSXEAuDZt708p9kq2X6rsvo")}},function(e){e.O(0,[328,647,362,779,145,971,117,744],function(){return e(e.s=5861)}),_N_E=e.O()}]);