(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[805],{6361:function(e,r,t){Promise.resolve().then(t.bind(t,8750))},6211:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9205).Z)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]])},1817:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6337:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9205).Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},3417:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9205).Z)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},3578:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9205).Z)("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]])},3745:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9205).Z)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]])},2489:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9205).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8750:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return g}});var s=t(7437),a=t(2265),i=t(7905),l=t(7648),n=t(9376),o=t(3588),d=t(1417),c=t(3764);let u=(0,t(9205).Z)("ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);var f=t(3417),m=t(6211),x=t(3578),h=t(3745),p=t(6337),y=t(8651),b=t(9064),g=()=>{let e=(0,n.useParams)(),r=null==e?void 0:e.id,[t,g]=(0,a.useState)(null),[v,j]=(0,a.useState)([]),[w,k]=(0,a.useState)([]),[N,Z]=(0,a.useState)(!0),[_,z]=(0,a.useState)(""),[C,O]=(0,a.useState)(null),[S,q]=(0,a.useState)(!1),[E,M]=(0,a.useState)(!1),[P,U]=(0,a.useState)(!1),R=(0,n.useRouter)(),A=(0,a.useCallback)(async(e,r)=>{let{data:t,error:s}=await i.O.from("blocks").select("*").eq("user_id",e).eq("blocked_user_id",r).maybeSingle();if(s){console.error("Error checking block status:",s);return}q(!!t)},[]);(0,a.useEffect)(()=>{(async()=>{var e,t;Z(!0),z("");let{data:{session:s}}=await i.O.auth.getSession();if(O(s),!r||!(null==s?void 0:s.user)){z(r?"You must be logged in to view profiles.":"No user ID provided."),Z(!1),(null==s?void 0:s.user)||R.push("/login");return}if(r===s.user.id){R.push("/profile");return}let{data:a,error:l}=await i.O.from("blocks").select("user_id").eq("user_id",r).eq("blocked_user_id",s.user.id).maybeSingle();if(l&&console.error("Error checking if blocked by user:",l),a){M(!0),Z(!1);return}let{data:n,error:o}=await i.O.from("profiles").select("*, locations(*)").eq("id",r).single();if(o||!n){console.error("Error loading user profile:",o),z("Could not find this user."),Z(!1);return}g(n);let[d,c]=await Promise.all([i.O.from("profile_passions").select("passions(name)").eq("profile_id",r),i.O.from("profile_languages").select("languages(name)").eq("profile_id",r)]);j((null===(e=d.data)||void 0===e?void 0:e.map(e=>e.passions.name))||[]),k((null===(t=c.data)||void 0===t?void 0:t.map(e=>e.languages.name))||[]),await A(s.user.id,r),Z(!1)})()},[r,R,A]);let V=async()=>{if((null==C?void 0:C.user)&&t&&confirm("Are you sure you want to block ".concat(t.first_name,"? You won't see them in search or messages.")))try{let{error:e}=await i.O.from("blocks").insert({user_id:C.user.id,blocked_user_id:t.id});if(e)throw e;q(!0),b.ZP.success("User blocked successfully"),R.push("/dashboard")}catch(e){b.ZP.error(e.message)}},L=async()=>{if((null==C?void 0:C.user)&&t&&confirm("Unblock ".concat(t.first_name,"?")))try{let{error:e}=await i.O.from("blocks").delete().eq("user_id",C.user.id).eq("blocked_user_id",t.id);if(e)throw e;q(!1),b.ZP.success("User unblocked")}catch(e){b.ZP.error(e.message)}};if(N)return(0,s.jsx)("main",{className:"flex-grow p-4 sm:p-6 w-full",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,s.jsx)(d.Z,{})})});if(E)return(0,s.jsxs)("div",{className:"flex-grow flex flex-col items-center justify-center p-10 text-center",children:[(0,s.jsx)(u,{size:64,className:"text-gray-600 mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Profile Unavailable"}),(0,s.jsx)("p",{className:"text-gray-400",children:"You cannot view this profile."}),(0,s.jsx)(l.default,{href:"/dashboard",className:"mt-6 text-indigo-400 hover:text-indigo-300",children:"Return to Dashboard"})]});if(_||!t)return(0,s.jsxs)("div",{className:"text-center p-10 text-white",children:[(0,s.jsx)("p",{className:"text-xl text-red-400 mb-4",children:_||"Profile not found"}),(0,s.jsx)(l.default,{href:"/dashboard",className:"text-indigo-400 hover:underline",children:"Return to Dashboard"})]});let F=(0,s.jsx)("div",{className:"flex flex-wrap gap-3 justify-center sm:justify-end",children:S?(0,s.jsxs)("button",{onClick:L,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-lg transition",children:[(0,s.jsx)(h.Z,{size:18}),(0,s.jsx)("span",{children:"Unblock"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.default,{href:"/messages?conversation=".concat(t.id),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-lg transition-all duration-300 transform hover:scale-105 text-white",children:[(0,s.jsx)(f.Z,{size:18}),(0,s.jsx)("span",{children:"Message"})]}),(0,s.jsx)("button",{onClick:()=>U(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition text-white",title:"Report User",children:(0,s.jsx)(m.Z,{size:18})}),(0,s.jsx)("button",{onClick:V,className:"flex items-center gap-2 px-4 py-2 bg-red-900/50 hover:bg-red-900/80 text-red-200 rounded-lg transition",title:"Block User",children:(0,s.jsx)(x.Z,{size:18})})]})});return t.is_private?(0,s.jsxs)("div",{className:"flex-grow flex flex-col items-center justify-center p-10 text-center",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)(c.Z,{seed:t.id,className:"w-32 h-32 rounded-full mx-auto mb-4"}),(0,s.jsxs)("h1",{className:"text-3xl font-bold",children:[t.first_name," ",t.last_name]})]}),(0,s.jsxs)("div",{className:"bg-gray-900/50 p-6 rounded-xl border border-gray-800 max-w-md w-full",children:[(0,s.jsx)(p.Z,{size:48,className:"text-gray-500 mx-auto mb-4"}),(0,s.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"This profile is private"}),(0,s.jsxs)("p",{className:"text-gray-400 mb-6",children:[t.first_name," has limited who can see their profile details."]}),F]}),(null==C?void 0:C.user)&&t&&(0,s.jsx)(y.Z,{isOpen:P,onClose:()=>U(!1),reporterId:C.user.id,reportedUserId:t.id,reportedUserName:t.first_name||"User"})]}):(0,s.jsxs)("main",{className:"flex-grow p-4 sm:p-6 w-full",children:[(0,s.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,s.jsx)(o.Z,{profile:t,passions:v,languages:w,actionSlot:F})}),(null==C?void 0:C.user)&&t&&(0,s.jsx)(y.Z,{isOpen:P,onClose:()=>U(!1),reporterId:C.user.id,reportedUserId:t.id,reportedUserName:t.first_name||"User"})]})}},795:function(e,r,t){"use strict";let s,a;t.d(r,{z:function(){return u}});var i=t(7437),l=t(2265);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,o=function(){for(var e,r,t=0,s="",a=arguments.length;t<a;t++)(e=arguments[t])&&(r=function e(r){var t,s,a="";if("string"==typeof r||"number"==typeof r)a+=r;else if("object"==typeof r){if(Array.isArray(r)){var i=r.length;for(t=0;t<i;t++)r[t]&&(s=e(r[t]))&&(a&&(a+=" "),a+=s)}else for(s in r)r[s]&&(a&&(a+=" "),a+=s)}return a}(e))&&(s&&(s+=" "),s+=r);return s};var d=t(1817);let c=(s="w-full flex items-center justify-center px-6 py-3 font-semibold rounded-lg shadow-lg hover:shadow-2xl transform hover:scale-105 transition-all duration-300 disabled:opacity-70 disabled:cursor-not-allowed",a={variants:{variant:{primary:"bg-primary text-white hover:bg-opacity-90",secondary:"bg-secondary text-white hover:bg-opacity-90",outline:"bg-transparent border border-text-tertiary text-text-secondary hover:bg-background-secondary",danger:"bg-red-600 text-white hover:bg-red-700"}},defaultVariants:{variant:"primary"}},e=>{var r;if((null==a?void 0:a.variants)==null)return o(s,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:t,defaultVariants:i}=a,l=Object.keys(t).map(r=>{let s=null==e?void 0:e[r],a=null==i?void 0:i[r];if(null===s)return null;let l=n(s)||n(a);return t[r][l]}),d=e&&Object.entries(e).reduce((e,r)=>{let[t,s]=r;return void 0===s||(e[t]=s),e},{});return o(s,l,null==a?void 0:null===(r=a.compoundVariants)||void 0===r?void 0:r.reduce((e,r)=>{let{class:t,className:s,...a}=r;return Object.entries(a).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...i,...d}[r]):({...i,...d})[r]===t})?[...e,t,s]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)}),u=l.forwardRef((e,r)=>{let{className:t,variant:s,isLoading:a,icon:l,children:n,...o}=e;return(0,i.jsx)("button",{className:c({variant:s,className:t}),ref:r,disabled:a,...o,children:a?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Z,{className:"animate-spin -ml-1 mr-3 h-5 w-5"}),(0,i.jsx)("span",{children:"Loading..."})]}):(0,i.jsxs)(i.Fragment,{children:[l&&(0,i.jsx)("span",{className:"mr-2",children:l}),n]})})});u.displayName="Button"},6003:function(e,r,t){"use strict";var s=t(7437),a=t(2265),i=t(4887),l=t(2489);r.Z=e=>{let{isOpen:r,onClose:t,title:n,children:o,footer:d}=e,c=(0,a.useRef)(null),[u,f]=(0,a.useState)(!1);if((0,a.useEffect)(()=>(f(!0),()=>f(!1)),[]),(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t()};return r&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[r,t]),!r||!u)return null;let m=(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm transition-opacity",onClick:e=>{c.current&&!c.current.contains(e.target)&&t()},role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:(0,s.jsxs)("div",{ref:c,className:"bg-gray-900 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-gray-800 animate-in fade-in zoom-in duration-200",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-800 sticky top-0 bg-gray-900 z-10",children:[(0,s.jsx)("h2",{id:"modal-title",className:"text-xl font-bold text-white",children:n}),(0,s.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-white p-1 rounded-full hover:bg-gray-800 transition","aria-label":"Close modal",children:(0,s.jsx)(l.Z,{size:24})})]}),(0,s.jsx)("div",{className:"p-6 text-gray-300",children:o}),d&&(0,s.jsx)("div",{className:"flex justify-end p-6 border-t border-gray-800 bg-gray-900 sticky bottom-0 z-10",children:d})]})});return(0,i.createPortal)(m,document.body)}},8651:function(e,r,t){"use strict";var s=t(7437),a=t(2265),i=t(6003),l=t(795),n=t(7905),o=t(9064);r.Z=e=>{let{isOpen:r,onClose:t,reporterId:d,reportedUserId:c,reportedUserName:u}=e,[f,m]=(0,a.useState)(""),[x,h]=(0,a.useState)(!1),p=async()=>{if(f.trim()){h(!0);try{let{error:e}=await n.O.from("reports").insert({reporter_id:d,reported_user_id:c,reason:f});if(e)throw e;o.ZP.success("Report submitted. Thank you for keeping our community safe."),m(""),t()}catch(e){console.error("Error submitting report:",e),o.ZP.error(e.message||"Failed to submit report")}finally{h(!1)}}};return(0,s.jsx)(i.Z,{isOpen:r,onClose:t,title:"Report ".concat(u),children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-gray-300",children:"Please describe why you are reporting this user. This will be reviewed by our team."}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"report-reason",className:"sr-only",children:"Reason for reporting"}),(0,s.jsx)("textarea",{id:"report-reason",className:"w-full h-32 bg-gray-800 border border-gray-700 rounded-lg p-3 text-white focus:ring-2 focus:ring-indigo-500 focus:outline-none",placeholder:"Reason for reporting...",value:f,onChange:e=>m(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)(l.z,{variant:"secondary",onClick:t,className:"!w-auto",children:"Cancel"}),(0,s.jsx)(l.z,{variant:"primary",onClick:p,disabled:!f.trim()||x,isLoading:x,className:"!w-auto",children:"Submit Report"})]})]})})}}},function(e){e.O(0,[328,647,362,779,145,64,912,971,117,744],function(){return e(e.s=6361)}),_N_E=e.O()}]);