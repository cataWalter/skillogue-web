(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9839:function(e,t,s){Promise.resolve().then(s.t.bind(s,4811,23)),Promise.resolve().then(s.bind(s,9064)),Promise.resolve().then(s.t.bind(s,2778,23)),Promise.resolve().then(s.bind(s,4772)),Promise.resolve().then(s.bind(s,284)),Promise.resolve().then(s.bind(s,1082))},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},8728:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2369:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9376:function(e,t,s){"use strict";var r=s(5475);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},3764:function(e,t,s){"use strict";var r=s(7437),a=s(2265),n=s(2523);let i=[s(5397),s(1210),s(4508),s(1241),s(336),s(9519),s(918),s(2250)];t.Z=e=>{let{seed:t,className:s,alt:l}=e,[o,c]=(0,a.useState)("");return((0,a.useEffect)(()=>{let e=e=>{let t=0;for(let s=0;s<e.length;s++)t=(t<<5)-t+e.charCodeAt(s)|0;return Math.abs(t)},s=async()=>{let s=e(t)%i.length,r=i[s];try{let e=await (0,n.$i)(r,{seed:t,radius:50,backgroundColor:["b6e3f4","c0aede","d1d4f9","ffd5dc","ffdfbf"]}),s=await e.toDataUri();c(s)}catch(e){console.error("Failed to generate avatar:",e)}};t&&s()},[t]),o)?(0,r.jsx)("img",{src:o,alt:l||"User Avatar",className:s||"w-12 h-12 rounded-full object-cover"}):(0,r.jsx)("div",{className:s||"w-12 h-12 rounded-full bg-gray-700 animate-pulse","aria-label":"Loading avatar"})}},4772:function(e,t,s){"use strict";s.d(t,{default:function(){return u}});var r=s(7437),a=s(2265),n=s(9205);let i=(0,n.Z)("github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),l=(0,n.Z)("twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),o=(0,n.Z)("linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);var c=s(6003);let d=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Terms of Service"}),(0,r.jsx)("p",{className:"mb-2",children:"Welcome to Skillogue..."}),(0,r.jsx)("p",{className:"mb-2",children:"By using our service, you agree to..."})]}),x=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Privacy Policy"}),(0,r.jsx)("p",{className:"mb-2",children:"We value your privacy..."}),(0,r.jsx)("p",{className:"mb-2",children:"Your data is never sold..."})]}),h=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Frequently Asked Questions"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"How do I sign up?"}),(0,r.jsx)("p",{children:"Click “Sign Up” and confirm your email."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Is Skillogue free?"}),(0,r.jsx)("p",{children:"Yes, forever free for core features."})]})]})]});var u=()=>{let[e,t]=(0,a.useState)({open:!1,title:"",content:null}),s=(e,s)=>{t({open:!0,title:e,content:s})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("footer",{className:"bg-gray-800 text-white",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"xl:grid xl:grid-cols-3 xl:gap-8",children:[(0,r.jsxs)("div",{className:"space-y-8 xl:col-span-1",children:[(0,r.jsxs)("h2",{className:"text-white text-3xl font-bold",children:["Skill",(0,r.jsx)("span",{className:"text-indigo-400",children:"ogue"})]}),(0,r.jsx)("p",{className:"text-gray-400 text-base",children:"Connect through passions, not pictures"}),(0,r.jsxs)("div",{className:"flex space-x-6",children:[(0,r.jsxs)("a",{href:"https://github.com/skillogue",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-gray-300",children:[(0,r.jsx)("span",{className:"sr-only",children:"GitHub"}),(0,r.jsx)(i,{className:"h-6 w-6"})]}),(0,r.jsxs)("a",{href:"https://twitter.com/skillogue",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-gray-300",children:[(0,r.jsx)("span",{className:"sr-only",children:"Twitter"}),(0,r.jsx)(l,{className:"h-6 w-6"})]}),(0,r.jsxs)("a",{href:"https://linkedin.com/company/skillogue",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-gray-300",children:[(0,r.jsx)("span",{className:"sr-only",children:"LinkedIn"}),(0,r.jsx)(o,{className:"h-6 w-6"})]})]})]}),(0,r.jsx)("div",{className:"mt-12 md:mt-0 xl:col-span-2",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-300 uppercase tracking-wider",children:"Support"}),(0,r.jsxs)("ul",{className:"mt-4 space-y-4",children:[(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:()=>s("FAQ",(0,r.jsx)(h,{})),className:"text-base text-gray-300 hover:text-white text-left transition",children:"FAQ"})}),(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:()=>s("Contact Us",(0,r.jsxs)("p",{className:"text-gray-300",children:["Email us at ",(0,r.jsx)("a",{href:"mailto:support@skillogue.com",className:"text-indigo-400",children:"support@skillogue.com"})]})),className:"text-base text-gray-300 hover:text-white text-left transition",children:"Contact Us"})}),(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:()=>s("Help Center",(0,r.jsx)("p",{className:"text-gray-300",children:"Visit our Help Center for guides and troubleshooting."})),className:"text-base text-gray-300 hover:text-white text-left transition",children:"Help Center"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-300 uppercase tracking-wider",children:"Legal"}),(0,r.jsxs)("ul",{className:"mt-4 space-y-4",children:[(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:()=>s("Terms",(0,r.jsx)(d,{})),className:"text-base text-gray-300 hover:text-white text-left transition",children:"Terms"})}),(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:()=>s("Privacy Policy",(0,r.jsx)(x,{})),className:"text-base text-gray-300 hover:text-white text-left transition",children:"Privacy Policy"})}),(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:()=>s("Cookies",(0,r.jsx)("p",{className:"text-gray-300",children:"We use essential cookies to keep the site running. You can disable non-essential ones in settings."})),className:"text-base text-gray-300 hover:text-white text-left transition",children:"Cookies"})})]})]})]})})]}),(0,r.jsx)("div",{className:"mt-12 border-t border-gray-700 pt-8",children:(0,r.jsxs)("p",{className:"text-base text-gray-400 text-center",children:["\xa9 ",new Date().getFullYear()," Skillogue, Inc. All rights reserved."]})})]})}),(0,r.jsx)(c.Z,{isOpen:e.open,onClose:()=>{t({open:!1,title:"",content:null})},title:e.title,children:e.content})]})}},6003:function(e,t,s){"use strict";var r=s(7437),a=s(2265),n=s(4887),i=s(2489);t.Z=e=>{let{isOpen:t,onClose:s,title:l,children:o,footer:c}=e,d=(0,a.useRef)(null),[x,h]=(0,a.useState)(!1);if((0,a.useEffect)(()=>(h(!0),()=>h(!1)),[]),(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&s()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,s]),!t||!x)return null;let u=(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm transition-opacity",onClick:e=>{d.current&&!d.current.contains(e.target)&&s()},role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:(0,r.jsxs)("div",{ref:d,className:"bg-gray-900 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-gray-800 animate-in fade-in zoom-in duration-200",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-800 sticky top-0 bg-gray-900 z-10",children:[(0,r.jsx)("h2",{id:"modal-title",className:"text-xl font-bold text-white",children:l}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-white p-1 rounded-full hover:bg-gray-800 transition","aria-label":"Close modal",children:(0,r.jsx)(i.Z,{size:24})})]}),(0,r.jsx)("div",{className:"p-6 text-gray-300",children:o}),c&&(0,r.jsx)("div",{className:"flex justify-end p-6 border-t border-gray-800 bg-gray-900 sticky bottom-0 z-10",children:c})]})});return(0,n.createPortal)(u,document.body)}},284:function(e,t,s){"use strict";s.d(t,{default:function(){return k}});var r=s(7437),a=s(2265),n=s(7648),i=s(9376),l=s(7905),o=s(9205);let c=(0,o.Z)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);var d=s(2369),x=s(3247);let h=(0,o.Z)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var u=s(3417),m=s(8728);let g=(0,o.Z)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var f=s(2489);let p=(0,o.Z)("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]);var y=s(4766),j=s(1082),v=s(3764),b=s(6682),N=e=>{let{onClose:t}=e,{notifications:s,markAsRead:a}=(0,j.z)(),i=e=>"new_message"===e.type&&e.actor?"/messages?with=".concat(e.actor.id):"/notifications",l=e=>{var t;let s=(null===(t=e.actor)||void 0===t?void 0:t.first_name)||"Someone";return"new_message"===e.type?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("strong",{children:s})," sent you a message."]}):"You have a new notification from ".concat(s,".")};return(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-gray-800 border border-gray-700 rounded-lg shadow-lg z-20",children:[(0,r.jsxs)("div",{className:"p-3 flex justify-between items-center border-b border-gray-700",children:[(0,r.jsx)("h3",{className:"font-semibold",children:"Notifications"}),(0,r.jsx)("button",{onClick:()=>a(null),className:"text-sm text-indigo-400 hover:underline",children:"Mark all as read"})]}),(0,r.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===s.length?(0,r.jsx)("p",{className:"text-gray-400 p-4 text-center",children:"No new notifications."}):s.map(e=>(console.log("[Dropdown] Processing notification ID ".concat(e.id,". Actor object is:"),e.actor),e.actor)?(0,r.jsxs)(n.default,{href:i(e),onClick:()=>{e.read||a(e.id),t()},className:"flex items-start gap-3 p-3 hover:bg-gray-700/50 ".concat(e.read?"":"bg-indigo-900/20"),children:[(0,r.jsx)(v.Z,{seed:e.actor.id,className:"w-10 h-10 rounded-full flex-shrink-0 mt-1"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm text-gray-200",children:l(e)}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:[(0,b.Q)(new Date(e.created_at))," ago"]})]}),!e.read&&(0,r.jsx)("div",{className:"w-2.5 h-2.5 bg-indigo-500 rounded-full mt-2 flex-shrink-0"})]},e.id):(0,r.jsxs)("div",{className:"flex items-start gap-3 p-3 text-gray-500",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex-shrink-0 mt-1"}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("p",{className:"text-sm",children:"This notification is from a user who no longer exists."})})]},e.id))}),(0,r.jsx)("div",{className:"p-2 border-t border-gray-700 text-center",children:(0,r.jsx)(n.default,{href:"/notifications",onClick:t,className:"text-sm font-medium text-indigo-400 hover:underline",children:"View all notifications"})})]})},w=()=>{let{unreadCount:e}=(0,j.z)(),[t,s]=(0,a.useState)(!1),n=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=e=>{n.current&&!n.current.contains(e.target)&&s(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,r.jsxs)("div",{className:"relative",ref:n,children:[(0,r.jsxs)("button",{onClick:()=>s(!t),className:"relative p-2 text-gray-300 hover:text-white hover:bg-gray-700 rounded-full transition","aria-label":"Notifications","aria-expanded":t,"aria-haspopup":"true",children:[(0,r.jsx)(y.Z,{size:20}),e>0&&(0,r.jsxs)("span",{className:"absolute top-0 right-0 flex h-4 w-4",children:[(0,r.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),(0,r.jsx)("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-red-500 justify-center items-center text-xs",children:e})]})]}),t&&(0,r.jsx)(N,{onClose:()=>s(!1)})]})},k=()=>{let[e,t]=(0,a.useState)(null),[s,o]=(0,a.useState)(!1),[y,j]=(0,a.useState)(0),[v,b]=(0,a.useState)(null),N=(0,a.useRef)(0),k=(0,i.useRouter)(),_=(0,i.usePathname)();(0,a.useEffect)(()=>{(async()=>{let{data:{session:e}}=await l.O.auth.getSession();t(e)})();let{data:{subscription:e}}=l.O.auth.onAuthStateChange((e,s)=>{t(s)});return()=>e.unsubscribe()},[]),(0,a.useEffect)(()=>{if(!(null==e?void 0:e.user))return;let t=async()=>{let{data:t,error:s}=await l.O.rpc("get_unread_message_count",{current_user_id:e.user.id});if(s){console.error("Error fetching unread count:",s);return}if(t&&t.length>0){let e=t[0].unread_count,s=t[0].last_message,r=t[0].full_name;j(e),e>0&&e>N.current&&!(null==_?void 0:_.startsWith("/messages"))&&b({message:s,sender:r}),N.current=e}};t();let s=setInterval(t,15e3);return()=>clearInterval(s)},[e,_]);let C=async()=>{await l.O.auth.signOut(),k.push("/")},P=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.default,{href:"/",className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-gray-700 rounded-md transition",children:[(0,r.jsx)(c,{size:18}),(0,r.jsx)("span",{children:"Home"})]}),(0,r.jsxs)(n.default,{href:"/profile",className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-gray-700 rounded-md transition",children:[(0,r.jsx)(d.Z,{size:18}),(0,r.jsx)("span",{children:"Profile"})]}),(0,r.jsxs)(n.default,{href:"/search",className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-gray-700 rounded-md transition",children:[(0,r.jsx)(x.Z,{size:18}),(0,r.jsx)("span",{children:"Search"})]}),(0,r.jsxs)(n.default,{href:"/dashboard",className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-gray-700 rounded-md transition",children:[(0,r.jsx)(h,{size:18}),(0,r.jsx)("span",{children:"Dashboard"})]}),(0,r.jsxs)(n.default,{href:"/messages",className:"relative flex items-center gap-2 px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-gray-700 rounded-md transition",children:[(0,r.jsx)(u.Z,{size:18}),(0,r.jsx)("span",{children:"Messages"}),y>0&&(0,r.jsx)("span",{className:"absolute top-1 right-1 flex h-4 w-4",children:(0,r.jsx)("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-indigo-500 justify-center items-center text-xs",children:y})})]}),(0,r.jsxs)(n.default,{href:"/settings",className:"flex items-center gap-2 text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition",children:[(0,r.jsx)(m.Z,{size:18}),(0,r.jsx)("span",{children:"Settings"})]})]});return(0,r.jsx)("nav",{className:"bg-gray-900 border-b border-gray-800",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)(n.default,{href:"/",className:"text-2xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"Skillogue"})}),(0,r.jsxs)("div",{className:"hidden md:flex md:items-center md:space-x-4",children:[e&&(0,r.jsx)(P,{}),e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w,{})," ",(0,r.jsxs)("button",{onClick:C,className:"flex items-center gap-2 ml-4 px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-gray-700 rounded-md transition",children:[(0,r.jsx)(g,{size:18}),(0,r.jsx)("span",{children:"Log Out"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center md:hidden",children:[e&&(0,r.jsx)(w,{})," ",(0,r.jsx)("button",{onClick:()=>o(!s),className:"ml-2 text-gray-400 hover:text-white focus:outline-none","aria-label":s?"Close menu":"Open menu","aria-expanded":s,children:s?(0,r.jsx)(f.Z,{size:24}):(0,r.jsx)(p,{size:24})})]})]}),s&&(0,r.jsx)("div",{className:"md:hidden bg-gray-900 border-t border-gray-800",children:(0,r.jsx)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P,{}),(0,r.jsxs)("button",{onClick:C,className:"flex items-center gap-2 w-full text-left mt-4 px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-gray-700 rounded-md transition",children:[(0,r.jsx)(g,{size:18}),(0,r.jsx)("span",{children:"Log Out"})]})]}):null})})]})})}},1082:function(e,t,s){"use strict";s.d(t,{NotificationProvider:function(){return x},z:function(){return h}});var r=s(7437),a=s(2265),n=s(7905),i=s(9064),l=s(3417),o=s(2489),c=e=>{let{message:t,sender:s,onClose:n}=e;return(0,a.useEffect)(()=>{let e=setTimeout(()=>{n()},5e3);return()=>clearTimeout(e)},[n]),(0,r.jsxs)("div",{className:"fixed bottom-5 right-5 w-full max-w-sm bg-gray-800 border border-gray-700 rounded-lg shadow-lg text-white p-4 flex items-start gap-4 animate-fade-in-up z-50",children:[(0,r.jsx)("div",{className:"flex-shrink-0 pt-1",children:(0,r.jsx)(l.Z,{className:"h-6 w-6 text-indigo-400"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-semibold",children:s}),(0,r.jsx)("p",{className:"text-sm text-gray-300",children:t})]}),(0,r.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-white",children:(0,r.jsx)(o.Z,{size:18})})]})};let d=(0,a.createContext)(void 0),x=e=>{let{children:t}=e,[s,l]=(0,a.useState)(null),[o,x]=(0,a.useState)([]),[h,u]=(0,a.useState)(0);(0,a.useEffect)(()=>{(async()=>{let{data:{session:e}}=await n.O.auth.getSession();l(e)})();let{data:{subscription:e}}=n.O.auth.onAuthStateChange((e,t)=>{l(t)});return()=>e.unsubscribe()},[]);let m=(0,a.useCallback)(async()=>{if(!(null==s?void 0:s.user))return;let{data:e,error:t}=await n.O.from("notifications").select("\n                id, read, type, created_at,\n                actor:actor_id (id, first_name)\n            ").eq("user_id",s.user.id).order("created_at",{ascending:!1}).limit(100);if(t){console.error("Error fetching notifications:",t);return}let r=(e||[]).map(e=>({...e,actor:Array.isArray(e.actor)?e.actor[0]||null:e.actor||null}));x(r),u(r.filter(e=>!e.read).length)},[s]);(0,a.useEffect)(()=>{s&&m()},[s,m]),(0,a.useEffect)(()=>{if(!(null==s?void 0:s.user))return;let e=n.O.channel("public:notifications").on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:"user_id=eq.".concat(s.user.id)},e=>{console.log("Notification table change detected:",e.eventType),m()}).subscribe(),t=n.O.channel("private-messages-for-".concat(s.user.id));return t.on("broadcast",{event:"new-message"},e=>{let{payload:t}=e;console.log("New message broadcast received in context:",t),m();let s=window.location.pathname,a=new URLSearchParams(window.location.search);s.startsWith("/messages")&&a.get("with")===t.message.sender_id||i.ZP.custom(e=>(0,r.jsx)(c,{message:t.message.content,sender:t.message.sender.first_name||"New Message",onClose:()=>i.ZP.dismiss(e.id)}),{position:"bottom-right"})}).subscribe(),()=>{n.O.removeChannel(e),n.O.removeChannel(t)}},[s,m]);let g=async e=>{if(!(null==s?void 0:s.user))return;let t=n.O.from("notifications").update({read:!0});e?t.eq("id",e):t.eq("user_id",s.user.id).eq("read",!1);let{error:r}=await t;r?console.error("Error marking notification as read:",r):(x(t=>t.map(t=>(e?t.id!==e:t.read)?t:{...t,read:!0})),u(e?Math.max(0,h-1):0))};return(0,r.jsx)(d.Provider,{value:{notifications:o,unreadCount:h,markAsRead:g,fetchNotifications:m},children:t})},h=()=>{let e=(0,a.useContext)(d);if(void 0===e)throw Error("useNotifications must be used within a NotificationProvider");return e}},7905:function(e,t,s){"use strict";s.d(t,{O:function(){return n}});var r=s(9066),a=s(257);let n=(0,r.eI)(a.env.REACT_APP_SUPABASE_URL,a.env.REACT_APP_SUPABASE_ANON_KEY)},2778:function(){},4811:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(e){e.O(0,[2,328,647,362,779,145,64,346,971,117,744],function(){return e(e.s=9839)}),_N_E=e.O()}]);