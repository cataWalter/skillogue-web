(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5125],{214:function(e,r,t){Promise.resolve().then(t.bind(t,9605))},2489:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});let s=(0,t(9205).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9605:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return l}});var s=t(7437),i=t(2265),a=t(7905);let c=(0,t(9205).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var n=t(2489),d=t(9064);function l(){let[e,r]=(0,i.useState)([]),[t,l]=(0,i.useState)(!0);(0,i.useEffect)(()=>{o()},[]);let o=async()=>{let{data:e,error:t}=await a.O.from("verification_requests").select("*, profiles(first_name, last_name, id)").eq("status","pending").order("created_at",{ascending:!1});t?console.error("Error fetching requests:",t):r(e||[]),l(!1)},u=async(e,r)=>{try{let{error:t}=await a.O.from("verification_requests").update({status:"approved"}).eq("id",e);if(t)throw t;let{error:s}=await a.O.from("profiles").update({verified:!0}).eq("id",r);if(s)throw s;d.Am.success("User verified successfully"),o()}catch(e){console.error("Error approving:",e),d.Am.error("Failed to approve")}},h=async e=>{try{let{error:r}=await a.O.from("verification_requests").update({status:"rejected"}).eq("id",e);if(r)throw r;d.Am.success("Request rejected"),o()}catch(e){console.error("Error rejecting:",e),d.Am.error("Failed to reject")}};return t?(0,s.jsx)("div",{children:"Loading..."}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Verification Requests"}),(0,s.jsx)("div",{className:"bg-gray-900 rounded-xl border border-gray-800 overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full text-left",children:[(0,s.jsx)("thead",{className:"bg-gray-800 text-gray-400",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-4",children:"User"}),(0,s.jsx)("th",{className:"p-4",children:"Date"}),(0,s.jsx)("th",{className:"p-4",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-800",children:0===e.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:3,className:"p-8 text-center text-gray-500",children:"No pending requests"})}):e.map(e=>{var r,t;return(0,s.jsxs)("tr",{className:"hover:bg-gray-800/50",children:[(0,s.jsxs)("td",{className:"p-4",children:[(0,s.jsxs)("div",{className:"font-medium",children:[null===(r=e.profiles)||void 0===r?void 0:r.first_name," ",null===(t=e.profiles)||void 0===t?void 0:t.last_name]}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.user_id})]}),(0,s.jsx)("td",{className:"p-4 text-gray-400",children:new Date(e.created_at).toLocaleDateString()}),(0,s.jsx)("td",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>u(e.id,e.user_id),className:"p-2 bg-green-900/30 text-green-500 rounded hover:bg-green-900/50 transition",title:"Approve",children:(0,s.jsx)(c,{size:18})}),(0,s.jsx)("button",{onClick:()=>h(e.id),className:"p-2 bg-red-900/30 text-red-500 rounded hover:bg-red-900/50 transition",title:"Reject",children:(0,s.jsx)(n.Z,{size:18})})]})})]},e.id)})})]})})]})}},7905:function(e,r,t){"use strict";t.d(r,{O:function(){return s}});let s=(0,t(9066).eI)("https://oyucjqjijrtipvssqxbc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im95dWNqcWppanJ0aXB2c3NxeGJjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQxNjM0NzUsImV4cCI6MjA2OTczOTQ3NX0.xzU_Qw-z0WbtUoLEaVPTrSXEAuDZt708p9kq2X6rsvo")}},function(e){e.O(0,[8193,9064,2971,2117,1744],function(){return e(e.s=214)}),_N_E=e.O()}]);